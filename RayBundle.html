

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>RayBundle &mdash; pyvsim 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyvsim 1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">pyvsim 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="raybundle">
<h1>RayBundle<a class="headerlink" href="#raybundle" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pyvsim.Primitives.RayBundle">
<em class="property">class </em><tt class="descclassname">pyvsim.Primitives.</tt><tt class="descname">RayBundle</tt><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents an arbitrary number of light rays. The reason for
having them wrapped in a single class is that it allows full vectorization
of the raytracing procedure.</p>
<p>This can be called a disposable class</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.append">
<tt class="descname">append</tt><big>(</big><em>initialVector</em>, <em>initialPosition=None</em>, <em>wavelength=5.32e-07</em><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.append" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is used to append new rays in the bundle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>initialVector</strong> : numpy.ndarray <span class="math">\((N,3)\)</span></p>
<blockquote>
<div><p>if N rays are given, each element is the initial vector for ray
tracing of each ray</p>
</div></blockquote>
<p><strong>initialPosition</strong> : numpy.ndarray <span class="math">\((N,3)\)</span></p>
<blockquote>
<div><p>if no parameter is passed, rays will depart from the origin of the
bundle. Otherwise they will depart from the given points. If N
points were given, a single common starting point can be given</p>
</div></blockquote>
<p><strong>wavelength</strong> : numpy.ndarray <span class="math">\((N)\)</span></p>
<blockquote class="last">
<div><p>the wavelength of the rays in meters (this changes the color and
the behavior of the rays, if any dispersing element is present in
the simulation</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>If the starting point is omitted, it will assume that the rays
departs from the origin of the bundle</li>
<li>This method was not made to be efficient in a loop (there are many
checks), so it should be used ideally only once to append all rays</li>
<li>This method destroys data that was already ray-traced, if any</li>
</ul>
<p class="rubric">Examples</p>
<ol class="arabic simple">
<li>A single ray is inserted:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span> <span class="o">=</span> <span class="n">RayBundle</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Several rays are inserted, each with a starting point:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span> 
<span class="gp">... </span>              <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]]))</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Several rays are inserted, with a common starting point:</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bundle</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span> 
<span class="gp">... </span>              <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all rays and ray tracing data from the bundle.</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.clearData">
<tt class="descname">clearData</tt><big>(</big><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.clearData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.clearData" title="Permalink to this definition">¶</a></dt>
<dd><p>This method removes all elements from the self.items list and the ray
pathes</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.delete">
<tt class="descname">delete</tt><big>(</big><em>n</em><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is not implemented, and is present only to respect the 
Assembly interface. As deleting a single ray requires many matrix 
reshapings, it is better to clear all the data and redo the ray
tracing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><strong>NotImplementedError</strong> :</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.rotateImplementation">
<tt class="descname">rotateImplementation</tt><big>(</big><em>angle</em>, <em>axis</em>, <em>pivotPoint</em><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.rotateImplementation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.rotateImplementation" title="Permalink to this definition">¶</a></dt>
<dd><p>This method rotates the starting points and deletes all ray tracing
data, because a rotation or a translation of light 
rays may completely change the light paths.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>angle</strong> :</p>
<blockquote>
<div><p>Angle : scalar (in radians)</p>
</div></blockquote>
<p><strong>axis</strong> : numpy.ndarray :math:` (1, 3)`</p>
<blockquote>
<div><p>Vector around which the rotation occurs.</p>
</div></blockquote>
<p><strong>pivotPoint</strong> : numpy.ndarray :math:` (1, 3)`</p>
<blockquote class="last">
<div><p>Point in space around which the rotation occurs. If not given, 
rotates around origin.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.trace">
<tt class="descname">trace</tt><big>(</big><em>tracingRule=1</em>, <em>restart=False</em><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.trace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for starting ray tracing. The bundle must be included in the
environment assembly where ray tracing will be done (the position, 
however, is not important)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>tracingRule</strong> :</p>
<blockquote>
<div><p>Either RayBundle.TRACING_FOV or RayBundle.TRACING_LASER_REFLECTION,
this parameter tells if ray tracing should stop at opaque surfaces
(this is the case when tracing to determine the field of view) or
not (to trace for laser safety calculations)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first"><strong>RuntimeError</strong> :</p>
<blockquote class="last">
<div><p>If the bundle is not inserted in an assembly, this error will be 
raised.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Primitives.RayBundle.translateImplementation">
<tt class="descname">translateImplementation</tt><big>(</big><em>translation</em><big>)</big><a class="reference internal" href="modules/pyvsim/Primitives.html#RayBundle.translateImplementation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Primitives.RayBundle.translateImplementation" title="Permalink to this definition">¶</a></dt>
<dd><p>This method changes the rays starting points, and waits for clear data
to delete all ray tracing related information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>translation</strong> : numpy.ndarray :math:` (3)`</p>
<blockquote class="last">
<div><p>A [dx, dy, dz] vector</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="static/logo.png" alt="Logo"/>
            </a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/RayBundle.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">pyvsim 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ricardo Entz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>