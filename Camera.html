

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Camera &mdash; pyvsim 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyvsim 1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">pyvsim 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="camera">
<h1>Camera<a class="headerlink" href="#camera" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pyvsim.Toolbox.Camera">
<em class="property">class </em><tt class="descclassname">pyvsim.Toolbox.</tt><tt class="descname">Camera</tt><a class="reference internal" href="modules/pyvsim/Toolbox.html#Camera"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Camera" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a camera composed of a body (used only for display),
a sensor and a lens, therefore it is an assembly.</p>
<p>The main functions of this class are driving the sensor and the lens 
together, so that the user can call more logical functions (such as
initialize) instead of using a complicated series of internal functions.</p>
<p>The camera creates a mapping of world coordinates into sensor coordinates
by using direct linear transformations (a pinhole model). Lens imperfections
and ambient influence can be modeled by using several DLTs (which is 
controlled by the parameter mappingResolution).</p>
<p class="rubric">Methods</p>
<dl class="attribute">
<dt id="pyvsim.Toolbox.Camera.bounds">
<tt class="descname">bounds</tt><a class="reference internal" href="modules/pyvsim/Toolbox.html#Camera.bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Camera.bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>This signals the ray tracing implementation that no attempt should be
made to intersect rays with the camera</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Camera.initialize">
<tt class="descname">initialize</tt><big>(</big><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Camera.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Camera.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>This function calculates the camera field of view and its mapping
functions to relate world coordinates to sensor coordinates. This
should be called whenever the ambient is set up, so the camera can 
be used for synthetic image generation and displaying.</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Camera.mapPoints">
<tt class="descname">mapPoints</tt><big>(</big><em>pts</em>, <em>skipPupilAngle=False</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Camera.mapPoints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Camera.mapPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>This method determines the position that a set of points x,y,z map on
the camera sensor.</p>
<p>In order to optimize calculation speed, a lot of memory is used, but 
the method seems to run smoothly up to 2M points in a 5x5 mapping (2GB
of available RAM)</p>
<p>The number of elements in the bottleneck matrix is:</p>
<div class="math">
\[N = npts \cdot 3 \cdot mappingResolution[0] \cdot mappingResolution[1]\]</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>pts</strong> : numpy.array (N,3)</p>
<blockquote>
<div><p>A collection of points in the space</p>
</div></blockquote>
<p><strong>skipPupilAngle</strong> : boolean</p>
<blockquote>
<div><p>Setting this flag to true skip the step of calculating the solid
angle formed by the given points and the pupils. This is used only
in the initialization of the camera</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>uv</strong> : numpy.array (N,3)</p>
<blockquote>
<div><p>The points (in sensor homogeneous coordinates) mapped to the
sensor</p>
</div></blockquote>
<p><strong>w</strong> : numpy.array (N)</p>
<blockquote>
<div><p>The distance from the center of projection, as calculated by the
DLT matrix</p>
</div></blockquote>
<p><strong>dudv</strong> : numpy.array (N,6)</p>
<blockquote>
<div><p>The derivatives of the coordinates u,v with respect to x,y,z in the
following order:</p>
<div class="math">
\[\left [{du \over dx,  du \over dy,  du \over dz, dv \over dx,  dv \over dy,  dv \over dz} \right ]\]</div>
</div></blockquote>
<p><strong>lineOfSight</strong> : numpy.array (N,3)</p>
<blockquote>
<div><p>The line of sight vectors (the direction of the light ray that
goes from the point to the camera center of projection)</p>
</div></blockquote>
<p><strong>imdim</strong> : numpy.array(N)</p>
<blockquote>
<div><p>The diameter of the image as generated by a point source (consider
geometrical size + diffraction-limited size)</p>
</div></blockquote>
<p><strong>pupilSolidAngle</strong> : numpy.array(N)</p>
<blockquote class="last">
<div><p>The solid angle formed by the entrance pupil and the given points. 
If flag skipPupilAngle is true, returns None</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Camera.setScheimpflugAngle">
<tt class="descname">setScheimpflugAngle</tt><big>(</big><em>angle</em>, <em>axis</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Camera.setScheimpflugAngle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Camera.setScheimpflugAngle" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a convenience function to set the Scheimpflug angle as in a 
well-build adapter (which means that the pivoting is performed through
the sensor center).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>angle</strong> : float (radians)</p>
<blockquote>
<div><p>The scheimpflug angle</p>
</div></blockquote>
<p><strong>axis</strong> : numpy.array (3)</p>
<blockquote class="last">
<div><p>The axis of rotation</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Camera.virtualCameras">
<tt class="descname">virtualCameras</tt><big>(</big><em>centeronly=True</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Camera.virtualCameras"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Camera.virtualCameras" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an assembly composed of cameras at the position and orientation
defined by the original camera mapping. E.g. if a camera is looking
through a mirror, the virtualCamera will be the mirror image of the
camera.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>centeronly</strong> : boolean</p>
<blockquote>
<div><p>If the camera mapping resolution has created more than a single 
mapping matrix (&gt;2), setting this value to True makes the routine
create only one camera (for the center mapping). Otherwise it will
create as many cameras as mapping matrices.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><strong>virtualCameras</strong> : pyvsim.Assembly</p>
<blockquote class="last">
<div><p>The cameras within this assembly are copies of the original camera
only with position and orientation changed (and carcass color), so
they are completely functional.
Care should be taken, as having too many cameras requires a lot of
memory (mappings, sensor data is stored in each camera).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="static/logo.png" alt="Logo"/>
            </a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/Camera.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">pyvsim 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ricardo Entz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>