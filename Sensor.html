<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sensor &mdash; pyvsim 1.0 documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="pyvsim 1.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">pyvsim 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="sensor">
<h1>Sensor<a class="headerlink" href="#sensor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pyvsim.Toolbox.Sensor">
<em class="property">class </em><tt class="descclassname">pyvsim.Toolbox.</tt><tt class="descname">Sensor</tt><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor" title="Permalink to this definition">¶</a></dt>
<dd><p class="rubric">Methods</p>
<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.clear">
<tt class="descname">clear</tt><big>(</big><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes CCD with gaussian noise, the distribution parameters are
given by:</p>
<div class="highlight-python"><pre>* backgroundMeanLevel - the mean value
* backgroundNoiseVar - the variance of the distribution</pre>
</div>
<p>To handle negative values, only the absolute value is taken into account</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.createDeadPixels">
<tt class="descname">createDeadPixels</tt><big>(</big><em>probability</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.createDeadPixels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.createDeadPixels" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a dead/hot pixel mapping for the sensor reading simulation</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.parametricToPixel">
<tt class="descname">parametricToPixel</tt><big>(</big><em>coordinates</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.parametricToPixel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.parametricToPixel" title="Permalink to this definition">¶</a></dt>
<dd><p>coords = [u,v] (in parametric -1..1 space)</p>
<p>There is an inversion of the UV columns because of the unfortunate 
parametric coordinate system that maps:</p>
<p>u -&gt; sensor.z
v -&gt; sensor.y</p>
<p>returns:
[row column] - fractional position in sensor pixels</p>
<p>DOES NOT CHECK IF OUTSIDE SENSOR BOUNDARIES!!!</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.physicalToPixel">
<tt class="descname">physicalToPixel</tt><big>(</big><em>coords</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.physicalToPixel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.physicalToPixel" title="Permalink to this definition">¶</a></dt>
<dd><p>coords = [x,y,z] (in real space)</p>
<p>returns:
[row column] - fractional position in sensor pixels</p>
<p>DOES NOT CHECK IF OUTSIDE SENSOR BOUNDARIES!!!</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.readSensor">
<tt class="descname">readSensor</tt><big>(</big><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.readSensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.readSensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sensor reading in counts, creating quantization noise and
saturating the signal where appropriate. This also simulates dead pixels,
if there is a dead pixel mapping</p>
<p>The readout noise, however, should be included in the background noise
property of the class</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.recordParticles">
<tt class="descname">recordParticles</tt><big>(</big><em>coords</em>, <em>energy</em>, <em>wavelength</em>, <em>diameter</em>, <em>ignoreLarge=0.2</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.recordParticles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.recordParticles" title="Permalink to this definition">¶</a></dt>
<dd><p>coords     - [y,z] parametric coordinates of the recorded point
energy     - J -   energy which is captured by the lenses
wavelength - m -   illumination wavelength
diameter   - m -   particle image diameter</p>
<p>This is the front-end of the _recordParticle method, its main input
is an array of parametric coordinates, representing the particle image
centers.</p>
<p>The other inputs can be either arrays (e.g. for particle with 
varying diameters) or scalars (e.g. for all particles with same
diameter). It is more or less obvious that the arrays must have
the same length as the coordinate arrays.</p>
<p>Another issue is that the recording is much less efficient
when particle image sizes varying size (the source of this issue
is at the _recordParticles documentation). So some tricks (such
as sorting by particle size) are used to reduce this effect. This
procedure is made when the standard deviation exceeds 1/10th of the
particle diameter (ajustable by the STD_PARAM constant at the
beginning of the module).</p>
<p>Finally, as the recording itself is vectorized, but uses too much 
memory, it is made in steps. If you find problems too often, adjust
the following constants at the header of this module:</p>
<p>MEMSIZE - maximum acceptable number of elements in a numpy.ndarray</p>
<p>MEM_SAFETY - factor of safety</p>
</dd></dl>

<dl class="method">
<dt id="pyvsim.Toolbox.Sensor.save">
<tt class="descname">save</tt><big>(</big><em>filename</em><big>)</big><a class="reference internal" href="modules/pyvsim/Toolbox.html#Sensor.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyvsim.Toolbox.Sensor.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the sensor data in a 16-bit TIFF file (which is compatible
with some mainstream PIV software)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>filename</strong> : string</p>
<blockquote class="last">
<div><p>The file name and path (including the extension)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="static/logo.png" alt="Logo"/>
            </a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/Sensor.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">pyvsim 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ricardo Entz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>